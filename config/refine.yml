# Mode: choose whether to refine Watson-style plans (JSON) or Sherlock playbooks (YAML)
# Valid values: plans, playbooks
mode: playbooks

# ----- Plans mode (legacy Watson plan refinement) -----
# Output directories for each matrix (align these with your existing generator for plans)
output_directories:
  default: techniques
  enterprise: techniques/attack/enterprise
  ics: techniques/attack/ics
  mobile: techniques/attack/mobile

# Which matrices to consider when resolving technique metadata via attack_retriever
matrices:
  - enterprise
  # - ics
  # - mobile

# Optional: restrict to these technique IDs only (e.g., T1078, T1059, D3-NTA). Leave empty to process all found.
techniques:
  # - T0800
  # - T1078
  # - T1671

# Guidance appended to the prompt that the model MUST apply during refinement (plans mode only).
refine_guidance: |
  * Improve evidence descriptions to be measurable and testable; avoid vague phrasing.
  * Ensure data sources list precise artifacts (e.g., "Windows Event ID 4624", "Zeek conn.log", "Zeek dns.log").
  * Include at least one symbolic, one statistical, and one ML-oriented action where reasonable. Improve existing  
  * Keep actions executable by SOC analysts; be explicit but concise.
  * Do not remove required fields; preserve the top-level array-of-objects JSON schema.

# Skip rules (plans mode only)
skip_if_updated_after: null   # e.g., "2025-09-01" or null to disable
skip_if_version_gt: null      # e.g., "1.2" or null to disable

# ----- Playbooks mode (Sherlock) -----
# Directories containing Sherlock playbooks to refine
playbook_directories:
  enterprise: playbooks/attack/enterprise
  ics: playbooks/attack/ics
  mobile: playbooks/attack/mobile
  default: playbooks/misc

# File safety
backup: true

# LLM provider selection
# # Force Gemini only:
# llm_provider: gemini
# llm_model: gemini-2.5-pro

# Force AskSage only:
llm_provider: asksage
llm_model: google-gemini-2.5-pro

# # Auto (legacy behavior):
# llm_provider: auto
# llm_model: null

# Primary model (Gemini family) to try first in AUTO mode
model: gemini-2.5-pro

# LLM call behavior
max_retries: 3
retry_delay: 1

# Parallelism:
# - Set to 0, 1, or leave null to run single-core.
# - Set to 2 or more to enable multi-core; will cap at machine CPU count.
num_cores: 8