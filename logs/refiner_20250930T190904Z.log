2025-09-30 19:09:04 INFO     __main__ :: Run initialized at: 20250930T190904Z | Logging to: logs/refiner_20250930T190904Z.log
2025-09-30 19:09:04 INFO     __main__ :: Loading Gemini API key
2025-09-30 19:09:04 INFO     __main__ :: Loading Sage API key
2025-09-30 19:09:04 INFO     __main__ :: Loading configuration
2025-09-30 19:09:04 INFO     __main__ :: Successfully loaded configuration from 'config/refine.yml'.
2025-09-30 19:09:04 INFO     __main__ :: Building technique dictionary
2025-09-30 19:09:04 INFO     src.attack_retriever :: Processing matrix: enterprise
2025-09-30 19:09:04 INFO     src.attack_retriever :: Using cached version of 'enterprise' matrix from 'enterprise-attack.json'.
2025-09-30 19:09:11 INFO     src.attack_retriever :: Built dictionary with 679 unique techniques across 1 matrices.
2025-09-30 19:09:11 INFO     __main__ :: Filtering for 1 specific techniques from config.
2025-09-30 19:09:11 INFO     __main__ :: Will attempt to refine plans for up to 1 techniques (existing files only).
2025-09-30 19:09:11 INFO     __main__ :: [MAIN pid=73557 proc=MainProcess] Running in multi-core mode with 8 workers.
2025-09-30 19:09:11 INFO     __main__ :: [T1671] [pid=73566 proc=ForkProcess-1] START: about to process with endpoint=gemini model=gemini-2.5-pro
2025-09-30 19:09:11 INFO     __main__ :: [LLM] [pid=73566 proc=ForkProcess-1] Attempt 1/3: endpoint=gemini model=gemini-2.5-pro
2025-09-30 19:09:11 INFO     google_genai.models :: AFC is enabled with max remote calls: 10.
2025-09-30 19:09:11 INFO     httpx :: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro:generateContent "HTTP/1.1 429 Too Many Requests"
2025-09-30 19:09:11 ERROR    __main__ :: [LLM] [pid=73566 proc=ForkProcess-1] Gemini rate/quota issue: 429 RESOURCE_EXHAUSTED. {'error': {'code': 429, 'message': 'You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.\n* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_requests, limit: 50\nPlease retry in 48.570202254s.', 'status': 'RESOURCE_EXHAUSTED', 'details': [{'@type': 'type.googleapis.com/google.rpc.QuotaFailure', 'violations': [{'quotaMetric': 'generativelanguage.googleapis.com/generate_content_free_tier_requests', 'quotaId': 'GenerateRequestsPerDayPerProjectPerModel-FreeTier', 'quotaDimensions': {'location': 'global', 'model': 'gemini-2.5-pro'}, 'quotaValue': '50'}]}, {'@type': 'type.googleapis.com/google.rpc.Help', 'links': [{'description': 'Learn more about Gemini API quotas', 'url': 'https://ai.google.dev/gemini-api/docs/rate-limits'}]}, {'@type': 'type.googleapis.com/google.rpc.RetryInfo', 'retryDelay': '48s'}]}}. Falling back to AskSage.
2025-09-30 19:09:11 INFO     __main__ :: [LLM] [pid=73566 proc=ForkProcess-1] Using endpoint=AskSage model=google-gemini-2.5-pro
2025-09-30 19:09:11 INFO     __main__ :: [LLM] [pid=73566 proc=ForkProcess-1] AskSage success model=google-gemini-2.5-pro
2025-09-30 19:09:11 INFO     __main__ :: [T1671] [pid=73566 proc=ForkProcess-1] INFO: fell back to endpoint=asksage model=google-gemini-2.5-pro
2025-09-30 19:09:11 ERROR    __main__ :: [T1671] [pid=73566 proc=ForkProcess-1] FAIL: could not extract JSON from model output.
2025-09-30 19:09:11 INFO     __main__ :: [MAIN pid=73557 proc=MainProcess] T1671: fail (no_json)
2025-09-30 19:09:11 INFO     __main__ :: [MAIN pid=73557 proc=MainProcess] Refinement complete. Refined: 0 | Skipped: 0 | Missing: 0 | Failed: 1
2025-09-30 19:09:11 INFO     __main__ :: [MAIN] Script finished successfully.
