2025-09-30 12:57:47 INFO     __main__ :: Run initialized at: 20250930T125747Z | Logging to: logs/refiner_20250930T125747Z.log
2025-09-30 12:57:47 INFO     __main__ :: Loading Gemini API key
2025-09-30 12:57:47 INFO     __main__ :: Loading Sage API key
2025-09-30 12:57:47 INFO     __main__ :: Loading configuration
2025-09-30 12:57:47 INFO     __main__ :: Successfully loaded configuration from 'config/refine.yml'.
2025-09-30 12:57:47 INFO     __main__ :: Building technique dictionary
2025-09-30 12:57:47 INFO     src.attack_retriever :: Processing matrix: enterprise
2025-09-30 12:57:47 INFO     src.attack_retriever :: Using cached version of 'enterprise' matrix from 'enterprise-attack.json'.
2025-09-30 12:57:54 INFO     src.attack_retriever :: Built dictionary with 679 unique techniques across 1 matrices.
2025-09-30 12:57:54 INFO     __main__ :: Filtering for 1 specific techniques from config.
2025-09-30 12:57:54 INFO     __main__ :: Will attempt to refine plans for up to 1 techniques (existing files only).
2025-09-30 12:57:54 INFO     __main__ :: [MAIN pid=69423 proc=MainProcess] Running in multi-core mode with 8 workers.
2025-09-30 12:57:54 INFO     __main__ :: [T1596] [pid=69432 proc=ForkProcess-1] START: about to process with endpoint=gemini model=gemini-2.5-flash
2025-09-30 12:57:54 INFO     __main__ :: [LLM] [pid=69432 proc=ForkProcess-1] Attempt 1/3: endpoint=gemini model=gemini-2.5-flash
2025-09-30 12:57:54 INFO     google_genai.models :: AFC is enabled with max remote calls: 10.
2025-09-30 12:57:55 INFO     httpx :: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent "HTTP/1.1 503 Service Unavailable"
2025-09-30 12:57:55 WARNING  __main__ :: [LLM] [pid=69432 proc=ForkProcess-1] Gemini error: 503 UNAVAILABLE. {'error': {'code': 503, 'message': 'The model is overloaded. Please try again later.', 'status': 'UNAVAILABLE'}}. Retrying in 1.0s ...
2025-09-30 12:57:56 INFO     __main__ :: [LLM] [pid=69432 proc=ForkProcess-1] Attempt 2/3: endpoint=gemini model=gemini-2.5-flash
2025-09-30 12:57:56 INFO     google_genai.models :: AFC is enabled with max remote calls: 10.
2025-09-30 12:58:06 INFO     httpx :: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent "HTTP/1.1 503 Service Unavailable"
2025-09-30 12:58:06 WARNING  __main__ :: [LLM] [pid=69432 proc=ForkProcess-1] Gemini error: 503 UNAVAILABLE. {'error': {'code': 503, 'message': 'The model is overloaded. Please try again later.', 'status': 'UNAVAILABLE'}}. Retrying in 2.0s ...
2025-09-30 12:58:08 INFO     __main__ :: [LLM] [pid=69432 proc=ForkProcess-1] Attempt 3/3: endpoint=gemini model=gemini-2.5-flash
2025-09-30 12:58:08 INFO     google_genai.models :: AFC is enabled with max remote calls: 10.
2025-09-30 12:58:11 INFO     httpx :: HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent "HTTP/1.1 503 Service Unavailable"
2025-09-30 12:58:11 WARNING  __main__ :: [LLM] [pid=69432 proc=ForkProcess-1] Gemini attempts exhausted. Falling back to AskSage.
2025-09-30 12:58:11 INFO     __main__ :: [LLM] [pid=69432 proc=ForkProcess-1] Using endpoint=AskSage model=google-gemini-2.5-pro
2025-09-30 12:59:25 INFO     __main__ :: [LLM] [pid=69432 proc=ForkProcess-1] AskSage success model=google-gemini-2.5-pro
2025-09-30 12:59:25 INFO     __main__ :: [T1596] [pid=69432 proc=ForkProcess-1] INFO: fell back to endpoint=asksage model=google-gemini-2.5-pro
2025-09-30 12:59:25 INFO     __main__ :: [T1596] [pid=69432 proc=ForkProcess-1] DONE: processing complete with endpoint=asksage model=google-gemini-2.5-pro
2025-09-30 12:59:25 INFO     __main__ :: [MAIN pid=69423 proc=MainProcess] T1596: ok
2025-09-30 12:59:25 INFO     __main__ :: [MAIN pid=69423 proc=MainProcess] Refinement complete. Refined: 1 | Skipped: 0 | Missing: 0 | Failed: 0
2025-09-30 12:59:25 INFO     __main__ :: [MAIN] Script finished successfully.
